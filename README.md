# SPLASH - система бронирования на автомойках

## Содержание
- [Цель](#Цель)
- [Описание](#Описание)
- [Стэк используемых технологий](#Стэк)
- [Архитектура приложения](#Архитектура)
- [Деплой приложения](#развертывание-приложения)

## Цель
Реализация возможности онлайн бронирования на автомобильных мойках

## Описание

Владелец автомобиля в случае потребности получения услуги по мойке своего автомобиля вынужден совершать звонки по 
заведениям, предлагающим такие услуги на территории, ближайшей к его расположению, либо осуществлять поездки до
всех заведений с целью определения свободных мест.

Необходимо спроектировать и разработать информационную систему, реализующую следующие функции:

· Регистрация автомойки (партнера) в приложении (self-service, web, аутентификация identity provider vk.com + login/pass)

· Регистрация клиента в приложении (self-service, web adaptive for mobile devices, аутентификация identity provider vk.com + login/pass)

· Просмотр в приложении клиента на карте автомоек, доступных для приема (yandex maps)

· Бронирование времени в клиентском приложении

· Подтверждение бронирования и просмотр бронирований в приложении партнера

Другие функции, которые могут быть полезны в процессе бронирования

## Стэк
* Java 21
* Spring boot 3.2.5
* Angular 11
* Keycloak
* PostgreSQL
* Kafka
* Zookeeper

## Архитектура

### Архитектура баз данных
![db.png](images/db.png)

### Архитектура приложения 
![architecture.png](images/architecture.png)

### Архитектура backend
В рамках микросервисной архитектуры были созданы:

1) Сервисы для конфигурации микросервисов
* **gateway** - шлюз, через который проходят все запросы, если запрос требует авторизации то он перенаправляется на
сервер авторизации
* **config-server** - сервер-менеджер конфигураций микросервисов
* **discovery** - менеджер обнаружения микросервисов

2) Микросервисы, обрабатывающие непосредственно бизнес-логику
* **user-service** - сервис обработки пользователей
* **order-service** - сервис обработки заказов пользователей
* **business-order-service** - сервис обработки заказов со стороны автомойки
* **configuration-service** - сервис обработки конфигураций автомоек
* **service-of-services** - сервис обработки услуг
* **statistics** - сервис сбора статистики
* **notification-service** - сервис отправки сообщений пользователям
* **storage-service** - сервис хранилища фотографий

## Развертывание приложения
* Созданы Dockerfile для всех сервисов
* Написан docker-compose.yml
* Приложение развернуто в виртуальной машине на платформе Yandex Cloud
* Создан кластер с использованием Docker swarm
* Базы данных и брокер сообщений Kafka вынесены в отдельную виртуальную машину
* Создан файл deploy.yml с описанием автоматического обновления состояния приложения на виртуальной машине, при пуше обновлений на ветку master
  ![stack.png](images/stack.jpg)
